{% extends "InfluHome-Base.html" %}

{% load static %}

{% block content %}
<!--  Header Start -->
<header class="app-header">
  <nav class="navbar navbar-expand-lg navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item d-block d-xl-none">
        <a class="nav-link sidebartoggler nav-icon-hover" id="headerCollapse" href="javascript:void(0)">
          <i class="ti ti-menu-2"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-icon-hover" href="" style="color: #5D87FF;">홈</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-icon-hover" href="/ComparisonAnalysis">1대1 매칭 분석</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-icon-hover" href="/notice">모집공고</a>
      </li>
    </ul>
    <div class="navbar-collapse justify-content-end px-0" id="navbarNav">
      <ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">
        <a href="/accounts/Influ_Logout" class="btn btn-primary">로그아웃</a>
      </ul>
    </div>
  </nav>
</header>
<!--  Header End -->

<div class="container-fluid">
  <!--  Row 1 -->
  <div class="row">
    <h3>인기 포스트</h3>
      <div class="col-sm-6 col-xl-3">
        <div class="card overflow-hidden rounded-2">
          <div class="position-relative">
            <a href="{{hot_post1.insta_url}}" target="_blank"><img src="{{hot_post1.post_url}}" class="card-img-top rounded-0" alt="..."></a>
          </div>
          <div class="card-body pt-3 p-3">
            <h6 class="fw-semibold fs-4" style="display: flex; align-items: center; justify-content: space-between;">
              <span>
                  <i class="ti ti-heart" style="display: inline;"></i>
                  {{ hot_post1.like_count }}
              </span>
              <span>
                  <i class="ti ti-message" style="display: inline;"></i>
                  {{ hot_post1.comments_count }}
              </span>
          </h6>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-xl-3">
        <div class="card overflow-hidden rounded-2">
          <div class="position-relative">
            <a href="{{hot_post2.insta_url}}" target="_blank"><img src="{{hot_post2.post_url}}" class="card-img-top rounded-0" alt="..."></a>
            </div>
          <div class="card-body pt-3 p-3">
            <h6 class="fw-semibold fs-4" style="display: flex; align-items: center; justify-content: space-between;">
              <span>
                  <i class="ti ti-heart" style="display: inline;"></i>
                  {{ hot_post2.like_count }}
              </span>
              <span>
                  <i class="ti ti-message" style="display: inline;"></i>
                  {{ hot_post2.comments_count }}
              </span>
          </h6>
          </div>
          </div>
        </div>
        <div class="col-sm-6 col-xl-3">
          <div class="card overflow-hidden rounded-2">
            <div class="position-relative">
              <a href="{{hot_post3.insta_url}}" target="_blank"><img src="{{hot_post3.post_url}}" class="card-img-top rounded-0" alt="..."></a>
              </div>
              <div class="card-body pt-3 p-3">
                <h6 class="fw-semibold fs-4" style="display: flex; align-items: center; justify-content: space-between;">
                  <span>
                      <i class="ti ti-heart" style="display: inline;"></i>
                      {{ hot_post3.like_count }}
                  </span>
                  <span>
                      <i class="ti ti-message" style="display: inline;"></i>
                      {{ hot_post3.comments_count }}
                  </span>
              </h6>
              </div>
            </div>
          </div>
          <div class="col-sm-6 col-xl-3">
            <div class="card overflow-hidden rounded-2">
              <div class="position-relative">
                <a href="{{hot_post4.insta_url}}" target="_blank"><img src="{{hot_post4.post_url}}" class="card-img-top rounded-0" alt="..."></a>
              </div>
                <div class="card-body pt-3 p-3">
                  <h6 class="fw-semibold fs-4" style="display: flex; align-items: center; justify-content: space-between;">
                    <span>
                        <i class="ti ti-heart" style="display: inline;"></i>
                        {{ hot_post4.like_count }}
                    </span>
                    <span>
                        <i class="ti ti-message" style="display: inline;"></i>
                        {{ hot_post4.comments_count }}
                    </span>
                </h6>
                </div>
            </div>
          </div>
        </div>
        <div class="row">
          <h3 class="col-lg-12">포스트 정보</h3>
          <div class="col-lg-6"> <!-- 첫 번째 카드 -->
            <div class="card overflow-hidden">
              <div class="card-body p-4 text-center">
                <h6 class="card-title mb-9 fw-semibold">포스트 유형</h6>
                
                <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
                <script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js"></script>
                <script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js"></script>
                <link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
                <link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">
                <style type="text/css">
                  html,
                  body,
                  #container {
                    width: 100%;
                    height: 50px;
                    margin: 0;
                    padding: 0;
                  }
              </style>
              <div id="container"></div>
              <script>
                anychart.onDocumentReady(function () {
                  // create data set on our data
                  var dataSet = anychart.data.set([
                    ['media type', {{influencer.feed_percent}}, {{influencer.reels_percent}}],
                  ]);
                 
                  // map data for the first series, take x from the zero column and value from the first column of data set
                  var floridaData = dataSet.mapAs({ x: 0, value: 1 });
              
                  // map data for the second series, take x from the zero column and value from the second column of data set
                  var texasData = dataSet.mapAs({ x: 0, value: 2 });
              
                  // create bar chart
                  var chart = anychart.bar();
              
                  // turn on chart animation
                  chart.animation(true);
              
                  // force chart to stack values by Y scale.
                  chart.yScale().stackMode('percent');
              
              
                  // set yAxis labels formatting, force it to add % to values
                  chart.yAxis(0).labels().format('{%Value}%');
              
                  // helper function to setup label settings for all series
                  var setupSeriesLabels = function (series, name) {
                    series.name(name).stroke('3 #fff 1');
                    series.hovered().stroke('3 #fff 1');
                  };
              
                  // temp variable to store series instance
                  var series;
              
                  // create Florida series with mapped data
                  series = chart.bar(floridaData);
                  setupSeriesLabels(series, '사진/비디오');
              
                  // create Texas series with mapped data
                  series = chart.bar(texasData);
                  setupSeriesLabels(series, '릴스');
              
                  chart.interactivity().hoverMode('by-x');
              
                  chart.tooltip().displayMode('union').valuePrefix('%');
                  chart.xAxis(0).enabled(false);
                  chart.yAxis(0).enabled(false);
              
                 
                  chart.legend().enabled(false)
                  chart.height(50);
                  chart.palette(['#5D87FF','#49BEFF']);
                  // set container id for the chart
                  chart.container('container');
                  // initiate chart drawing
                  chart.draw();
                });
              </script>
              
                <div class="row align-items-center">
                  <div class="col-12">
                    <div class="align-items-center">
                        <span class="round-8 bg-primary rounded-circle me-2 d-inline-block"></span>
                        <span class="fs-2">사진/비디오 </span>
                        <span class="round-8 bg-secondary rounded-circle me-2 d-inline-block"></span>
                        <span class="fs-2">릴스</span>
                    </div>
                    <p class="fs-1 mb-0">채널에 게시된 포스트의 구성을 유형별로 파악할 수 있습니다.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3"> <!-- 두 번째 카드 -->
            <div class="card overflow-hidden">
              <div class="card-body p-4 text-center">
                <h6 class="card-title mb-9 fw-semibold">주 평균 포스팅 현황</h6>
                <div class="row align-items-center">
                  <div class="col-12">
                    <div class="d-flex justify-content-center align-items-center">
                      <h1 class="fw-semibold mb-3 me-2" style="color: #5D87FF;">{{influencer.week_avg_post}}</h1>
                      <h3 class="fw-semibold mb-3">개/주</h3>
                    </div>
                    <p class="fs-1 mb-0">채널이 포스트를 게시하는 주 평균 횟수를</p>
                    <p class="fs-1 mb-0">파악할 수 있습니다</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3"> <!-- 세 번째 카드 -->
            <div class="card overflow-hidden">
              <div class="card-body p-4 text-center">
                <h6 class="card-title mb-9 fw-semibold">포스트 활동 성향</h6>
                <div class="row align-items-center">
                  <div class="col-12">
                    <div class="d-flex justify-content-center align-items-center">
                      <h5 class="fw-semibold mb-3 me-2" style="color: #5D87FF;">{{influencer.am_pm}}</h5>
                      <h1 class="fw-semibold mb-3" style="color: #5D87FF;">{{influencer.avg_post_time}}</h1>
                      <h3 class="fw-semibold mb-3 me-2;">시</h3>  
                    </div>
                    <p class="fs-1 mb-0">채널에 포스트가 게시되는 빈도가 </p>
                    <p class="fs-1 mb-0">가장 많은 시점을 파악할 수 있습니다</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <h3 class="col-lg-12">포스트 반응</h3>
          <div class="col-lg-4"> <!-- 첫 번째 카드 -->
            <div class="card overflow-hidden">
              <div class="card-body p-4 text-center">
                <h6 class="card-title mb-9 fw-semibold">평균 좋아요</h6>
                <div class="row align-items-center">
                  <div class="col-12">
                    <div class="d-flex justify-content-center align-items-center">
                      <h1 class="fw-semibold mb-3 me-2" style="color: #5D87FF;">{{influencer.avg_goods}}</h1>
                      <h1 class="fw-semibold mb-3">개</h1>
                    </div>
                    <p class="fs-1 mb-0">최근 3개월간 포스트를 기준으로 계산한</p>
                    <p class="fs-1 mb-0"> 포스트 1개에 대한 평균좋아요수를 나타내는 지표입니다</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4"> <!-- 두 번째 카드 -->
            <div class="card overflow-hidden">
              <div class="card-body p-4 text-center">
                <h6 class="card-title mb-9 fw-semibold">평균 댓글</h6>
                <div class="row align-items-center">
                  <div class="col-12">
                    <div class="d-flex justify-content-center align-items-center">
                      <h1 class="fw-semibold mb-3 me-2" style="color: #5D87FF;">{{influencer.avg_comments}}</h1>
                      <h1 class="fw-semibold mb-3">개</h1>
                    </div>
                    <p class="fs-1 mb-0">최근 3개월간 포스트를 기준으로 계산한</p>
                    <p class="fs-1 mb-0">포스트 1개에 대한 평균댓글수를 나타내는 지표입니다</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4"> <!-- 세 번째 카드 -->
            <div class="card overflow-hidden">
              <div class="card-body p-4 text-center">
                <h6 class="card-title mb-9 fw-semibold">댓글/좋아요 비율</h6>
                <div class="row align-items-center">
                  <div class="col-12">
                    <div class="d-flex justify-content-center align-items-center">
                      <h1 class="fw-semibold mb-3 me-2" style="color: #5D87FF;">{{influencer.comments_percent}}</h1>
                      <h1 class="fw-semibold mb-3">%</h1>
                    </div>
                    <p class="fs-1 mb-0">어떤 인플루언서들은 좋아요를 구매하는 경우가 있으므로</p>
                    <p class="fs-1 mb-0">비율이 낮은 경우 의심해 볼 수 있는 지표로 사용될 수 있습니다</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-4 d-flex align-items-stretch" style="height: 300px;">
            <div class="card w-100">
              <div class="card-body p-4 text-center">
                <div class="mb-4">
                  <h5 class="card-title fw-semibold">포스트 태그</h5>
                </div>
                <div id="chartkey"></div>

                <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
                <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
                <script>
                  anychart.onDocumentReady(function () {
                  var data = [
                  {
                    "x": "{{first_keywords.words}}",
                    "value": {{first_keywords.weights}}
                  },
                  {
                    "x": "{{second_keywords.words}}",
                    "value": {{second_keywords.weights}}
                  },
                  {
                    "x": "{{third_keywords.words}}",
                    "value": {{third_keywords.weights}}
                  },
                  {
                    "x": "{{forth_keywords.words}}",
                    "value": {{forth_keywords.weights}}
                  }, {
                    "x": "{{fifth_keywords.words}}",
                    "value": {{fifth_keywords.weights}}
                  }, {
                    "x": "{{sixth_keywords.words}}",
                    "value": {{sixth_keywords.weights}}
                  }
                  ];
                  var chart = anychart.tagCloud(data);
                  chart.angles([0]);
                  chart.container("chartkey");
                  // chart.getCredits().setEnabled(false);
                  chart.draw();
                });
              </script>
            
            </div>
          </div>
        </div>

        <div class="col-lg-8 d-flex align-items-stretch" style="height: 300px;">
          <div class="card w-100">
            <div class="card-body p-4 text-center">
              <h5 class="card-title fw-semibold mb-4">분석 제목 미정</h5>
            </div>
            <div id="chartdiv"></div>

            <style>
              #chartdiv {
                width: 100%;
                max-width: 100%;
                height: 350px;
              }
            </style>
              
            <!-- Resources -->
            <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
            <script src="https://cdn.amcharts.com/lib/5/hierarchy.js"></script>
            <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
            <script>
              am5.ready(function() {
                
              // Create root element
              // https://www.amcharts.com/docs/v5/getting-started/#Root_element
              var root = am5.Root.new("chartdiv");
                
              // Set themes
              // https://www.amcharts.com/docs/v5/concepts/themes/
              root.setThemes([
                am5themes_Animated.new(root)
              ]);
                
              var data = {
                value: 0,
                children: [
                  {
                    name: "Fruity",
                    children: [
                      {
                        name: "Berry",
                        children: [
                          {
                            name: "Blackberry",
                            value: 1
                          },
                          {
                            name: "Raspberry",
                            value: 1
                          },
                          {
                            name: "Blueberry",
                            value: 1
                          },
                          {
                            name: "Strawberry",
                            value: 1
                          }
                        ]
                      },
                      {
                        name: "Dried Fruit",
                        children: [
                          {
                            name: "Raisin",
                            value: 1
                          },
                          {
                            name: "Prune",
                            value: 1
                          }
                        ]
                      },
                      {
                        name: "Other Fruit",
                        children: [
                          {
                            name: "Coconut",
                            value: 1
                          },
                          {
                            name: "Cherry",
                            value: 1
                          },
                          {
                            name: "Pomegranate",
                            value: 1
                          },
                          {
                            name: "Pineapple",
                            value: 1
                          },
                          {
                            name: "Grape",
                            value: 1
                          },
                          {
                            name: "Apple",
                            value: 1
                          },
                          {
                            name: "Peach",
                            value: 1
                          },
                          {
                            name: "Pear",
                            value: 1
                          }
                        ]
                      },
                      {
                        name: "Citrus Fruit",
                        children: [
                          {
                            name: "Grapefruit",
                            value: 1
                          },
                          {
                            name: "Orange",
                            value: 1
                          },
                          {
                            name: "Lemon",
                            value: 1
                          },
                          {
                            name: "Lime",
                            value: 1
                          }
                        ]
                      }
                    ]
                  }
                ]
              };
                
              // Create wrapper container
                var container = root.container.children.push(am5.Container.new(root, {
                  width: am5.percent(100),
                  height: am5.percent(100),
                  layout: root.verticalLayout
                }));
                
                // Create series
                // https://www.amcharts.com/docs/v5/charts/hierarchy/#Adding
                var series = container.children.push(am5hierarchy.ForceDirected.new(root, {
                  singleBranchOnly: false,
                  downDepth: 2,
                  topDepth: 1,
                  initialDepth: 1,
                  valueField: "value",
                  categoryField: "name",
                  childDataField: "children",
                  idField: "name",
                  linkWithField: "linkWith",
                  manyBodyStrength: -10,
                  centerStrength: 0.8
                }));
                
                series.get("colors").setAll({
                  step: 2
                });
                
                series.links.template.set("strength", 0.5);
                
                series.data.setAll([data]);
                
                series.set("selectedDataItem", series.dataItems[0]);
                
                
                // Make stuff animate on load
                series.appear(1000, 100);
                
                }); // end am5.ready()
                </script>

            </div>
          </div>
        </div>
        <style>
          #chartdiv2 {
            width: 100%;
            height: 500px;
          }
          </style>
          
          <!-- Resources -->
          <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
          <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
          <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

        <div class="row">
          <div class="col-lg-6 d-flex align-items-stretch">
            <div class="card w-100">
              <div class="card-body p-4 text-center">
                <div class="mb-4">
                  <h5 class="card-title fw-semibold">광고 포스트 비율</h5>
                </div>
                <script>
                  am5.ready(function() {
                  
                  // Create root element
                  // https://www.amcharts.com/docs/v5/getting-started/#Root_element
                  var root = am5.Root.new("chartdiv2");
                  
                  
                  // Set themes
                  // https://www.amcharts.com/docs/v5/concepts/themes/
                  root.setThemes([
                    am5themes_Animated.new(root)
                  ]);
                  
                  
                  // Create chart
                  // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/
                  var chart = root.container.children.push(am5percent.PieChart.new(root, {
                    layout: root.verticalLayout,
                    innerRadius: am5.percent(50)
                  }));
                  
                  
                  // Create series
                  // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Series
                  var series = chart.series.push(am5percent.PieSeries.new(root, {
                    valueField: "value",
                    categoryField: "category",
                    alignLabels: false
                  }));
                  
                  series.labels.template.setAll({
                    textType: "circular",
                    centerX: 0,
                    centerY: 0
                  });
                  
                  
                  // Set data
                  // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Setting_data
                  series.data.setAll([
                    { value: 10, category: "One" },
                    { value: 9, category: "Two" },
                    { value: 6, category: "Three" },
                    { value: 5, category: "Four" },
                    { value: 4, category: "Five" },
                    { value: 3, category: "Six" },
                    { value: 1, category: "Seven" },
                  ]);
                  
                  
                  // Create legend
                  // https://www.amcharts.com/docs/v5/charts/percent-charts/legend-percent-series/
                  var legend = chart.children.push(am5.Legend.new(root, {
                    centerX: am5.percent(50),
                    x: am5.percent(50),
                    marginTop: 15,
                    marginBottom: 15,
                  }));
                  
                  legend.data.setAll(series.dataItems);
                  
                  
                  // Play initial series animation
                  // https://www.amcharts.com/docs/v5/concepts/animations/#Animation_of_series
                  series.appear(1000, 100);
                  
                  }); // end am5.ready()
                  </script>
                  
                  <!-- HTML -->
                  <div id="chartdiv2"></div>
              </div>
            </div>
          </div>
          <div class="col-lg-6 d-flex align-items-stretch">
            <div class="card w-100">
              <div class="card-body p-4 text-center">
                <h5 class="card-title fw-semibold mb-4">월별 팔로워 추이</h5>
                <div class="table-responsive">
                  <table class="table text-nowrap mb-0 align-middle">
                    <thead class="text-dark fs-4">
                      <tr>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Id</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Assigned</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Name</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Priority</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Budget</h6>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="border-bottom-0"><h6 class="fw-semibold mb-0">1</h6></td>
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">Sunil Joshi</h6>
                            <span class="fw-normal">Web Designer</span>                          
                        </td>
                        <td class="border-bottom-0">
                          <p class="mb-0 fw-normal">Elite Admin</p>
                        </td>
                        <td class="border-bottom-0">
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-primary rounded-3 fw-semibold">Low</span>
                          </div>
                        </td>
                        <td class="border-bottom-0">
                          <h6 class="fw-semibold mb-0 fs-4">$3.9</h6>
                        </td>
                      </tr> 
                      <tr>
                        <td class="border-bottom-0"><h6 class="fw-semibold mb-0">2</h6></td>
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">Andrew McDownland</h6>
                            <span class="fw-normal">Project Manager</span>                          
                        </td>
                        <td class="border-bottom-0">
                          <p class="mb-0 fw-normal">Real Homes WP Theme</p>
                        </td>
                        <td class="border-bottom-0">
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-secondary rounded-3 fw-semibold">Medium</span>
                          </div>
                        </td>
                        <td class="border-bottom-0">
                          <h6 class="fw-semibold mb-0 fs-4">$24.5k</h6>
                        </td>
                      </tr> 
                      <tr>
                        <td class="border-bottom-0"><h6 class="fw-semibold mb-0">3</h6></td>
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">Christopher Jamil</h6>
                            <span class="fw-normal">Project Manager</span>                          
                        </td>
                        <td class="border-bottom-0">
                          <p class="mb-0 fw-normal">MedicalPro WP Theme</p>
                        </td>
                        <td class="border-bottom-0">
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-danger rounded-3 fw-semibold">High</span>
                          </div>
                        </td>
                        <td class="border-bottom-0">
                          <h6 class="fw-semibold mb-0 fs-4">$12.8k</h6>
                        </td>
                      </tr>      
                      <tr>
                        <td class="border-bottom-0"><h6 class="fw-semibold mb-0">4</h6></td>
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">Nirav Joshi</h6>
                            <span class="fw-normal">Frontend Engineer</span>                          
                        </td>
                        <td class="border-bottom-0">
                          <p class="mb-0 fw-normal">Hosting Press HTML</p>
                        </td>
                        <td class="border-bottom-0">
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-success rounded-3 fw-semibold">Critical</span>
                          </div>
                        </td>
                        <td class="border-bottom-0">
                          <h6 class="fw-semibold mb-0 fs-4">$2.4k</h6>
                        </td>
                      </tr>                       
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endblock %}